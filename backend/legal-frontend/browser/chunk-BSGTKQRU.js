import{Fa as x,Ja as m,Ma as s,Mb as O,Ob as M,Qb as P,Rc as E,Sc as I,Yc as z,ab as l,bb as r,cb as a,db as u,eb as v,fb as h,ib as f,jb as d,lc as w,mc as y,pc as k,sc as D,tb as C,xb as c,xc as S,yb as _,za as i,zb as g}from"./chunk-OAVOYKTW.js";function V(e,n){if(e&1&&(r(0,"option",15),c(1),a()),e&2){let t=n.$implicit;l("value",t),i(),_(t)}}function F(e,n){if(e&1&&(r(0,"div",16),u(1,"div",17),r(2,"p",18),c(3),a()()),e&2){let t=d();i(3),g("Fetching records for ",t.selectedTable,"...")}}function L(e,n){if(e&1&&(r(0,"th"),c(1),a()),e&2){let t=n.$implicit;i(),_(t)}}function N(e,n){if(e&1&&(v(0),c(1),O(2,"date"),h()),e&2){let t=d().$implicit,o=d().$implicit;i(),g(" ",M(2,1,o[t],"medium")," ")}}function H(e,n){if(e&1&&c(0),e&2){let t=d().$implicit,o=d().$implicit;g(" ",o[t]," ")}}function $(e,n){if(e&1&&(r(0,"td")(1,"span",23),s(2,N,3,4,"ng-container",24)(3,H,1,1,"ng-template",null,0,P),a()()),e&2){let t=n.$implicit,o=C(4),p=d().$implicit,b=d(2);i(),l("title",p[t]),i(),l("ngIf",b.isDateColumn(t))("ngIfElse",o)}}function j(e,n){if(e&1&&(r(0,"tr"),s(1,$,5,3,"td",22),a()),e&2){let t=d(2);i(),l("ngForOf",t.tableHeaders)}}function Y(e,n){if(e&1&&(r(0,"div")(1,"div",19),c(2),a(),r(3,"div",20)(4,"table",21)(5,"thead")(6,"tr"),s(7,L,2,1,"th",22),a()(),r(8,"tbody"),s(9,j,2,1,"tr",22),a()()()()),e&2){let t=d();i(2),g(" Showing ",t.tableData.length," records "),i(5),l("ngForOf",t.tableHeaders),i(2),l("ngForOf",t.tableData)}}function B(e,n){if(e&1&&(r(0,"div",16)(1,"i",25),c(2,"inbox"),a(),r(3,"p",18),c(4),a()()),e&2){let t=d();i(4),g("Table '",t.selectedTable,"' is empty.")}}function W(e,n){e&1&&(r(0,"div",16)(1,"i",25),c(2,"storage"),a(),r(3,"p",18),c(4,"Please select a table to view its contents."),a()())}var T=class e{constructor(n){this.http=n}tableNames=[];selectedTable=null;tableData=[];tableHeaders=[];isLoading=!1;ngOnInit(){this.http.get("/api/test/tables").subscribe(n=>{this.tableNames=n.sort()})}isDateColumn(n){if(!n)return!1;let t=n.toLowerCase();return t.endsWith("_at")||t.endsWith("_date")||t==="date"}onTableSelect(n){let o=n.target.value;this.selectedTable=o,this.tableData=[],this.tableHeaders=[],o&&(this.isLoading=!0,this.http.get(`/api/test/table/${o}`).subscribe({next:p=>{this.tableData=p,p.length>0&&(this.tableHeaders=Object.keys(p[0])),this.isLoading=!1},error:p=>{console.error(p),this.isLoading=!1}}))}static \u0275fac=function(t){return new(t||e)(x(S))};static \u0275cmp=m({type:e,selectors:[["app-db-viewer"]],decls:21,vars:5,consts:[["normalVal",""],[1,"viewer-container","fade-in"],[1,"card"],[1,"card__header"],[1,"viewer-header"],[1,"viewer-header__titles"],[1,"subtitle"],[1,"select-wrapper"],["id","table-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"material-icons","select-wrapper__icon"],[1,"card__body",2,"padding","0"],["class","state-message",4,"ngIf"],[4,"ngIf"],[3,"value"],[1,"state-message"],[1,"spinner"],[1,"state-message__text"],[1,"table-meta"],[1,"table-responsive"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"raw-data-cell",3,"title"],[4,"ngIf","ngIfElse"],[1,"material-icons","state-message__icon"]],template:function(t,o){t&1&&(r(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1"),c(6,"Database Viewer"),a(),r(7,"p",6),c(8,"Direct access to raw table data for debugging."),a()(),r(9,"div",7)(10,"select",8),f("change",function(b){return o.onTableSelect(b)}),r(11,"option",9),c(12,"-- Select a Table --"),a(),s(13,V,2,2,"option",10),a(),r(14,"i",11),c(15,"arrow_drop_down"),a()()()(),r(16,"div",12),s(17,F,4,1,"div",13)(18,Y,10,3,"div",14)(19,B,5,1,"div",13)(20,W,5,0,"div",13),a()()()),t&2&&(i(13),l("ngForOf",o.tableNames),i(4),l("ngIf",o.isLoading),i(),l("ngIf",!o.isLoading&&o.tableData.length>0),i(),l("ngIf",!o.isLoading&&o.selectedTable&&o.tableData.length===0),i(),l("ngIf",!o.isLoading&&!o.selectedTable))},dependencies:[D,w,y,z,E,I,k],styles:[`.card[_ngcontent-%COMP%]{background-color:var(--primary-color);border-radius:12px;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);transition:transform .2s,box-shadow .2s;overflow:hidden}.card--hoverable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #00000014}.card__body[_ngcontent-%COMP%]{padding:20px}.card__header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.card__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text-color)}.table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;white-space:nowrap}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:16px;font-size:.8rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);border-bottom:1px solid var(--border-color);background-color:var(--bg-color)}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid var(--border-color);color:var(--text-color);vertical-align:middle;font-size:.95rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 10px;border-radius:6px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge--default[_ngcontent-%COMP%]{background-color:var(--bg-color);color:var(--text-secondary);border:1px solid var(--border-color)}.badge--primary[_ngcontent-%COMP%]{background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color)}.badge--success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#28a745}.badge--warning[_ngcontent-%COMP%]{background-color:#ffc10726;color:#856404}.badge--danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545}.badge--info[_ngcontent-%COMP%]{background-color:#17a2b81a;color:#17a2b8}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 18px;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s;font-size:.95rem;background-color:var(--bg-color);color:var(--text-color);border:none}.btn[_ngcontent-%COMP%]:hover{background-color:#0000000d;border-color:var(--text-secondary)}.btn--primary[_ngcontent-%COMP%]{background-color:var(--accent-color);color:#fff;border:1px solid transparent}.btn--primary[_ngcontent-%COMP%]:hover{filter:brightness(1.1);box-shadow:0 4px 12px rgba(var(--accent-color-rgb),.3);background-color:var(--accent-color);border-color:transparent}.btn--icon-only[_ngcontent-%COMP%]{padding:8px;background:transparent;color:var(--text-secondary);border-radius:50%}.btn--icon-only[_ngcontent-%COMP%]:hover{background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color)}.btn--danger[_ngcontent-%COMP%]{background-color:var(--danger-color);color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.btn.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.btn.text-danger[_ngcontent-%COMP%]:hover{background-color:#dc35451a}.btn--outline-danger[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--danger-color);color:var(--danger-color)}.btn--outline-danger[_ngcontent-%COMP%]:hover{background-color:var(--danger-color);color:#fff}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color)}.btn--outline[_ngcontent-%COMP%]:hover{border-color:var(--text-secondary);background-color:var(--bg-color)}.btn[_ngcontent-%COMP%]:disabled, .btn.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6;box-shadow:none;transform:none}.btn[_ngcontent-%COMP%]:disabled.btn--primary, .btn.disabled.btn--primary[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff}.btn[_ngcontent-%COMP%]:disabled.btn--primary:hover, .btn.disabled.btn--primary[_ngcontent-%COMP%]:hover{filter:none;box-shadow:none}.btn[_ngcontent-%COMP%]:disabled.btn--icon-only, .btn.disabled.btn--icon-only[_ngcontent-%COMP%]{color:var(--border-color)}.btn[_ngcontent-%COMP%]:disabled.btn--icon-only:hover, .btn.disabled.btn--icon-only[_ngcontent-%COMP%]:hover{background-color:transparent;color:var(--border-color)}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem;gap:6px}.btn--sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.btn--text[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-secondary);border:1px solid transparent}.btn--text[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-color);border-color:transparent}.search-box[_ngcontent-%COMP%]{position:relative}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary)}.search-box__input[_ngcontent-%COMP%]{padding:10px 15px 10px 40px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--bg-color);color:var(--text-color);width:280px;outline:none;transition:width .3s ease,border-color .2s}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);width:340px}.search-box__input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.7}.state-message[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--text-secondary);text-align:center}.state-message__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5;margin-bottom:15px;color:var(--text-secondary)}.state-message__text[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--text-secondary)}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-left-color:var(--accent-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:15px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.detail-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed var(--border-color);font-size:.95rem}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item__label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500}.detail-item__value[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;text-align:right}.detail-item__value--highlight[_ngcontent-%COMP%]{color:var(--danger-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)!important}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:26px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--border-color);transition:.4s;border-radius:34px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%;box-shadow:0 2px 4px #0003}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--accent-color)}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--accent-color)}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;color:var(--text-color);font-size:.95rem;-webkit-user-select:none;user-select:none}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:var(--accent-color);appearance:none;-webkit-appearance:none;margin:0;padding:0;box-sizing:border-box;width:16px;height:16px;border:2px solid var(--border-color);border-radius:4px;background-color:var(--bg-color);cursor:pointer;position:relative;transition:all .2s ease;flex-shrink:0}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{border-color:var(--accent-color)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--accent-color);border-color:var(--accent-color)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:5px;top:2px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{display:block}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{background-color:var(--border-color);border-color:var(--border-color);cursor:not-allowed}select[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 36px 10px 12px;font-size:.95rem;font-weight:400;line-height:1.5;color:var(--text-color);background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;color-scheme:light dark;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236c757d' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px 12px;transition:border-color .2s,box-shadow .2s;cursor:pointer}select[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);outline:0;box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.15)}select[_ngcontent-%COMP%]:disabled{background-color:#0000000d;cursor:not-allowed;opacity:.7}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color);padding:10px}select[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-secondary);font-weight:700}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;min-width:100%;padding:5px 0;margin-top:4px;font-size:.9rem;color:var(--text-color);text-align:left;list-style:none;background-color:var(--primary-color);background-clip:padding-box;border:1px solid var(--border-color);border-radius:8px;box-shadow:0 4px 20px #00000026;max-height:250px;overflow-y:auto;animation:_ngcontent-%COMP%_slideDownFade .2s ease-out}.dropdown-menu__item[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 16px;clear:both;font-weight:400;color:var(--text-color);text-align:inherit;white-space:nowrap;background-color:transparent;border:0;cursor:pointer;transition:background-color .1s;border-bottom:1px solid var(--border-color)}.dropdown-menu__item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-menu__item[_ngcontent-%COMP%]:hover, .dropdown-menu__item[_ngcontent-%COMP%]:focus{background-color:rgba(var(--accent-color-rgb),.08);color:var(--accent-color);text-decoration:none}.dropdown-menu__item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .dropdown-menu__item[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:2px}@media (prefers-color-scheme: dark){.dropdown-menu[_ngcontent-%COMP%]{box-shadow:0 4px 20px #00000080}}@keyframes _ngcontent-%COMP%_slideDownFade{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}input[type=date][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%], input[type=month][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%]{display:block;width:100%;padding:10px 12px;font-family:inherit;font-size:.95rem;border-radius:8px;background-color:var(--bg-color);color:var(--text-color);border:1px solid var(--border-color);color-scheme:light dark;cursor:pointer;outline:none;transition:border-color .2s,box-shadow .2s}input[type=date][_ngcontent-%COMP%]:focus, input[type=datetime-local][_ngcontent-%COMP%]:focus, input[type=month][_ngcontent-%COMP%]:focus, input[type=time][_ngcontent-%COMP%]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.15)}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=month][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;opacity:.6;filter:invert(0)}body.dark-theme[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, body.dark-theme[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1)}input[type=file][_ngcontent-%COMP%]{display:block;width:100%;padding:8px;font-size:.9rem;background-color:var(--bg-color);color:var(--text-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer}input[type=file][_ngcontent-%COMP%]::file-selector-button{margin-right:15px;padding:8px 16px;border:none;border-radius:6px;background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color);font-weight:600;cursor:pointer;transition:background .2s}input[type=file][_ngcontent-%COMP%]:hover::file-selector-button{background-color:rgba(var(--accent-color-rgb),.2)}.viewer-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:20px}.viewer-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px;width:100%}.viewer-header__titles[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px;font-size:1.5rem;color:var(--text-color)}.viewer-header__titles[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-secondary);font-size:.9rem}.select-wrapper[_ngcontent-%COMP%]{position:relative;min-width:250px}.select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;appearance:none;padding:10px 40px 10px 15px;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;color:var(--text-color);font-size:.95rem;cursor:pointer;outline:none;transition:border-color .2s,box-shadow .2s}.select-wrapper[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.1)}.select-wrapper__icon[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary);pointer-events:none}.table-meta[_ngcontent-%COMP%]{padding:10px 20px;font-size:.85rem;color:var(--accent-color);font-weight:600;text-align:right;border-bottom:1px solid var(--border-color);background-color:rgba(var(--accent-color-rgb),.05)}.raw-data-cell[_ngcontent-%COMP%]{max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}`]})};export{T as DbViewerComponent};
