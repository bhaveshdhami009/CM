import"./chunk-BYXBJQAS.js";import{a as ee}from"./chunk-73ZWASVY.js";import{a as O}from"./chunk-GNWRSBI3.js";import{a as te}from"./chunk-5XMEIF5P.js";import{b as X}from"./chunk-FAQ5RITY.js";import{c as j}from"./chunk-E3OGELKA.js";import{Cb as h,Cc as Y,Db as f,Eb as M,Ec as q,Fa as P,Ic as H,Ja as T,Lc as Z,Ma as u,Mb as A,Ob as R,Pa as V,Qb as L,Qc as $,Rc as J,Sc as Q,Yc as K,aa as p,ab as _,ba as g,bb as i,cb as r,db as U,eb as k,fb as S,hb as v,ib as m,jb as s,lc as z,mc as B,nb as D,ob as F,pb as N,pc as G,sc as W,tb as E,vb as C,xb as c,yb as x,za as l,zb as y}from"./chunk-OAVOYKTW.js";var ie=["scrollContainer"];function re(o,t){if(o&1&&(k(0),i(1,"span",22),c(2),r(),S()),o&2){let e=s().$implicit;l(2),x(e.unread_count||0)}}function ae(o,t){o&1&&(i(0,"span",24),c(1,"Invite"),r())}function ce(o,t){if(o&1&&u(0,ae,2,0,"span",23),o&2){let e=s().$implicit;_("ngIf",e.myStatus==="PENDING")}}function le(o,t){if(o&1){let e=v();i(0,"div",15),m("click",function(){let n=p(e).$implicit,d=s();return g(d.selectConversation(n))}),i(1,"div",16),c(2),r(),i(3,"div",17)(4,"div",18)(5,"span",19),c(6),r(),u(7,re,3,1,"ng-container",20)(8,ce,1,1,"ng-template",null,0,L),r(),i(10,"div",21),c(11),r()()()}if(o&2){let e=t.$implicit,a=E(9),n=s();C("active",(n.selectedConvo==null?null:n.selectedConvo.id)===e.id),l(2),y(" ",(e.displayName||"?").charAt(0).toUpperCase()," "),l(4),x(e.displayName),l(),_("ngIf",(e.unread_count||0)>0)("ngIfElse",a),l(3),C("bold-text",(e.unread_count||0)>0),l(),y(" ",n.getLastMessagePreview(e)," ")}}function se(o,t){o&1&&(i(0,"div",25)(1,"div",26)(2,"i",7),c(3,"chat_bubble_outline"),r()(),i(4,"h3",27),c(5,"Select a Conversation"),r(),i(6,"p",28),c(7,"Choose a chat from the left panel to start messaging."),r()())}function de(o,t){if(o&1&&(i(0,"span",42),c(1),r()),o&2){let e=s(2);l(),y(" ",(e.selectedConvo.participants==null?null:e.selectedConvo.participants.length)||0," members ")}}function _e(o,t){if(o&1){let e=v();i(0,"div",43)(1,"div",44)(2,"i",7),c(3,"mail"),r(),i(4,"p"),c(5,"You have been invited to this chat."),r()(),i(6,"div",45)(7,"button",46),m("click",function(){p(e);let n=s(2);return g(n.respondToInvite("ACCEPT"))}),c(8,"Accept"),r(),i(9,"button",47),m("click",function(){p(e);let n=s(2);return g(n.respondToInvite("REJECT"))}),c(10,"Reject"),r()()()}}function pe(o,t){o&1&&(i(0,"i",7),c(1,"sync"),r())}function ge(o,t){if(o&1){let e=v();i(0,"div",48)(1,"button",49),m("click",function(){p(e);let n=s(2);return g(n.loadMessages())}),u(2,pe,2,0,"i",50),c(3),r()()}if(o&2){let e=s(2);l(),_("disabled",e.isLoadingMessages),l(),_("ngIf",e.isLoadingMessages),l(),y(" ",e.isLoadingMessages?"Loading...":"Load Previous Messages"," ")}}function me(o,t){if(o&1&&(i(0,"span",58),c(1),r()),o&2){let e=s().$implicit;l(),y(" ",e.sender.full_name," ")}}function ue(o,t){if(o&1){let e=v();i(0,"div",59),m("click",function(){p(e);let n=s().$implicit,d=s(2);return g(d.downloadFile(n))}),i(1,"i",7),c(2,"description"),r(),i(3,"span"),c(4,"Download Attachment"),r()()}}function ve(o,t){if(o&1){let e=v();i(0,"i",60),m("click",function(){p(e);let n=s().$implicit,d=s(2);return g(d.deleteMessage(n))}),c(1,"delete_outline"),r()}}function xe(o,t){if(o&1&&(i(0,"div",51)(1,"div",52),u(2,me,2,1,"span",53),i(3,"div",54),c(4),u(5,ue,5,0,"div",55),r(),i(6,"div",56)(7,"span"),c(8),A(9,"date"),r(),u(10,ve,2,0,"i",57),r()()()),o&2){let e=t.$implicit,a=s(2);C("message-row--me",e.sender.id===a.currentUser_id),l(2),_("ngIf",a.selectedConvo.type==="GROUP"&&e.sender.id!==a.currentUser_id),l(2),y(" ",e.content," "),l(),_("ngIf",e.file_path),l(3),x(R(9,7,e.created_at,"shortTime")),l(2),_("ngIf",e.sender.id===a.currentUser_id&&!(e.content!=null&&e.content.startsWith("\u{1F6AB}")))}}function be(o,t){if(o&1){let e=v();i(0,"div",61)(1,"i",7),c(2,"block"),r(),i(3,"span"),c(4,"You have blocked this user. "),i(5,"a",62),m("click",function(){p(e);let n=s(2);return g(n.unblockUser(n.selectedConvo.otherUserId))}),c(6,"Unblock"),r()()()}}function Ce(o,t){o&1&&(i(0,"div",63)(1,"i",7),c(2,"mail_outline"),r(),i(3,"span"),c(4,"Please accept or reject the invite above to reply."),r()())}function he(o,t){o&1&&(i(0,"div",69)(1,"i",70),c(2,"info"),r(),c(3," User hasn't accepted your request yet. "),r())}function fe(o,t){if(o&1){let e=v();i(0,"div",71)(1,"span",72),c(2),r(),i(3,"button",73),m("click",function(){p(e);let n=s(3);return g(n.selectedFile=null)}),i(4,"i",7),c(5,"close"),r()()()}if(o&2){let e=s(3);l(2),x(e.selectedFile.name)}}function Me(o,t){if(o&1){let e=v();k(0),u(1,he,4,0,"div",64)(2,fe,6,1,"div",65),i(3,"button",6),m("click",function(){p(e);let n=E(7);return g(n.click())}),i(4,"i",7),c(5,"attach_file"),r()(),i(6,"input",66,2),m("change",function(n){p(e);let d=s(2);return g(d.onFileSelected(n))}),r(),i(8,"input",67),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.messageText,n)||(d.messageText=n),g(n)}),m("keyup.enter",function(){p(e);let n=s(2);return g(n.sendMessage())}),r(),i(9,"button",68),m("click",function(){p(e);let n=s(2);return g(n.sendMessage())}),i(10,"i",7),c(11,"send"),r()(),S()}if(o&2){let e=s(2);l(),_("ngIf",e.selectedConvo.otherStatus==="PENDING"),l(),_("ngIf",e.selectedFile),l(6),h("ngModel",e.messageText)}}function we(o,t){o&1&&(i(0,"div",74)(1,"span"),c(2,"Messaging disabled."),r()())}function ye(o,t){if(o&1){let e=v();k(0),i(1,"div",29)(2,"button",30),m("click",function(){p(e);let n=s();return g(n.selectedConvo=null)}),i(3,"i",7),c(4,"arrow_back"),r()(),i(5,"div",31),c(6),r(),i(7,"div",32)(8,"h3"),c(9),r(),u(10,de,2,1,"span",33),r(),i(11,"button",6),m("click",function(){p(e);let n=s();return g(n.openDetailsModal())}),i(12,"i",7),c(13,"info_outline"),r()()(),u(14,_e,11,0,"div",34),i(15,"div",35,1),u(17,ge,4,3,"div",36)(18,xe,11,10,"div",37),r(),i(19,"div",38),u(20,be,7,0,"div",39)(21,Ce,5,0,"div",40)(22,Me,12,3,"ng-container",12)(23,we,3,0,"div",41),r(),S()}if(o&2){let e=s();l(6),x(e.selectedConvo.displayName==null?null:e.selectedConvo.displayName.charAt(0)),l(3),x(e.selectedConvo.displayName),l(),_("ngIf",e.selectedConvo.type==="GROUP"),l(4),_("ngIf",e.selectedConvo.myStatus==="PENDING"),l(3),_("ngIf",e.hasMoreMessages&&e.messages.length>0),l(),_("ngForOf",e.messages),l(2),_("ngIf",e.inputState==="BLOCKED_BY_ME"),l(),_("ngIf",e.inputState==="PENDING_INVITE"),l(),_("ngIf",e.inputState==="ALLOWED"),l(),_("ngIf",e.inputState==="READ_ONLY")}}function Oe(o,t){if(o&1){let e=v();i(0,"div",75)(1,"div",76)(2,"div",77)(3,"h3"),c(4,"Send Invitation"),r(),i(5,"button",6),m("click",function(){p(e);let n=s();return g(n.showInviteMessageModal=!1)}),i(6,"i",7),c(7,"close"),r()()(),i(8,"div",78)(9,"p",79),c(10," Start this conversation with a short message so they know who you are. "),r(),i(11,"div",80)(12,"label"),c(13,"Message"),r(),i(14,"textarea",81),M("ngModelChange",function(n){p(e);let d=s();return f(d.inviteMessageText,n)||(d.inviteMessageText=n),g(n)}),r()()(),i(15,"div",82)(16,"button",83),m("click",function(){p(e);let n=s();return g(n.showInviteMessageModal=!1)}),c(17,"Cancel"),r(),i(18,"button",84),m("click",function(){p(e);let n=s();return g(n.sendInvite())}),c(19,"Send Request"),r()()()()}if(o&2){let e=s();l(14),h("ngModel",e.inviteMessageText)}}function Pe(o,t){if(o&1){let e=v();i(0,"button",91),m("click",function(){p(e);let n=s(3);return g(n.blockUser(n.selectedConvo==null?null:n.selectedConvo.otherUserId))}),i(1,"i",7),c(2,"block"),r(),c(3," Block User "),r()}}function ke(o,t){if(o&1){let e=v();i(0,"button",84),m("click",function(){p(e);let n=s(3);return g(n.unblockUser(n.selectedConvo==null?null:n.selectedConvo.otherUserId))}),i(1,"i",7),c(2,"check_circle"),r(),c(3," Unblock User "),r()}}function Se(o,t){if(o&1&&(i(0,"div",88)(1,"p"),c(2,"Conversation with "),i(3,"strong"),c(4),r()(),u(5,Pe,4,0,"button",89)(6,ke,4,0,"button",90),r()),o&2){let e=s(2);l(4),x(e.selectedConvo==null?null:e.selectedConvo.displayName),l(),_("ngIf",!e.isBlockedByMe),l(),_("ngIf",e.isBlockedByMe)}}function Ee(o,t){if(o&1&&(i(0,"option",102),c(1),r()),o&2){let e=t.$implicit;_("ngValue",e.value),l(),x(e.label)}}function Ie(o,t){if(o&1){let e=v();i(0,"div",97)(1,"label"),c(2,"Who can POST?"),r(),i(3,"div",98)(4,"select",99),M("ngModelChange",function(n){p(e);let d=s(3);return f(d.selectedConvo.min_role_write,n)||(d.selectedConvo.min_role_write=n),g(n)}),u(5,Ee,2,2,"option",100),r(),i(6,"button",101),m("click",function(){p(e);let n=s(3);return g(n.updateGroupPermissions())}),c(7,"Save"),r()()()}if(o&2){let e=s(3);l(4),h("ngModel",e.selectedConvo.min_role_write),l(),_("ngForOf",e.roleOptions)}}function Te(o,t){o&1&&(i(0,"span",107),c(1,"Admin"),r())}function Ve(o,t){if(o&1){let e=v();i(0,"button",108),m("click",function(){p(e);let n=s().$implicit,d=s(3);return g(d.removeMemberFromGroup(n.user.id))}),i(1,"i",7),c(2,"remove_circle_outline"),r()()}}function Ue(o,t){if(o&1&&(i(0,"div",103)(1,"div",104),c(2),r(),i(3,"span",19),c(4),r(),u(5,Te,2,0,"span",105)(6,Ve,3,0,"button",106),r()),o&2){let e=t.$implicit,a=s(3);l(2),x(e.user==null||e.user.full_name==null?null:e.user.full_name.charAt(0)),l(2),x(e.user==null?null:e.user.full_name),l(),_("ngIf",e.is_admin),l(),_("ngIf",(a.selectedConvo==null?null:a.selectedConvo.isAdmin)&&e.user.id!==a.currentUser_id&&e.user.role<8)}}function De(o,t){if(o&1){let e=v();i(0,"div",114),m("click",function(){let n=p(e).$implicit,d=s(4);return g(d.addMemberToGroup(n.id))}),i(1,"i",115),c(2,"add_circle"),r(),i(3,"span",19),c(4),r()()}if(o&2){let e=t.$implicit;l(4),x(e.full_name)}}function Fe(o,t){o&1&&(i(0,"div",116),c(1," No new members available. "),r())}function Ne(o,t){if(o&1){let e=v();i(0,"div",109)(1,"div",93),c(2,"Add Member"),r(),i(3,"div",94),u(4,De,5,1,"div",110)(5,Fe,2,0,"div",111),r(),i(6,"div",112)(7,"button",113),m("click",function(){p(e);let n=s(3);return g(n.deleteGroup())}),c(8,"Delete Group"),r()()()}if(o&2){let e=s(3);l(4),_("ngForOf",e.eligibleMembers),l(),_("ngIf",e.eligibleMembers.length===0)}}function Ae(o,t){if(o&1&&(i(0,"div"),u(1,Ie,8,2,"div",92),i(2,"div",93),c(3,"Members"),r(),i(4,"div",94),u(5,Ue,7,4,"div",95),r(),u(6,Ne,9,2,"div",96),r()),o&2){let e=s(2);l(),_("ngIf",e.selectedConvo==null?null:e.selectedConvo.isAdmin),l(4),_("ngForOf",e.selectedConvo==null?null:e.selectedConvo.participants),l(),_("ngIf",e.selectedConvo==null?null:e.selectedConvo.isAdmin)}}function Re(o,t){if(o&1){let e=v();i(0,"div",85),m("click",function(){p(e);let n=s();return g(n.showDetailsModal=!1)}),i(1,"div",86),m("click",function(n){return p(e),g(n.stopPropagation())}),i(2,"div",77)(3,"h3"),c(4),r(),i(5,"button",6),m("click",function(){p(e);let n=s();return g(n.showDetailsModal=!1)}),i(6,"i",7),c(7,"close"),r()()(),i(8,"div",78),u(9,Se,7,3,"div",87)(10,Ae,7,3,"div",12),r()()()}if(o&2){let e=s();l(4),x((e.selectedConvo==null?null:e.selectedConvo.type)==="GROUP"?"Group Info":"Chat Details"),l(5),_("ngIf",(e.selectedConvo==null?null:e.selectedConvo.type)==="DM"),l(),_("ngIf",(e.selectedConvo==null?null:e.selectedConvo.type)==="GROUP")}}function Le(o,t){if(o&1){let e=v();i(0,"div",119)(1,"button",120),m("click",function(){p(e);let n=s(2);return g(n.isGroupMode=!1)}),c(2,"Direct Message"),r(),i(3,"button",120),m("click",function(){p(e);let n=s(2);return g(n.isGroupMode=!0)}),c(4,"Create Group"),r()()}if(o&2){let e=s(2);l(),C("active",!e.isGroupMode),l(2),C("active",e.isGroupMode)}}function ze(o,t){if(o&1){let e=v();i(0,"div",114),m("click",function(){let n=p(e).$implicit,d=s(4);return g(d.startDM(n.id))}),i(1,"div",104),c(2),r(),i(3,"span",19),c(4),r()()}if(o&2){let e=t.$implicit,a=s(4);C("selected",a.selectedMemberIds.includes(e.id)),l(2),x(e.full_name==null?null:e.full_name.charAt(0)),l(2),x(e.full_name)}}function Be(o,t){if(o&1&&(k(0),i(1,"div",122)(2,"span"),c(3,"OR Select from Team"),r()(),i(4,"div",94),u(5,ze,5,4,"div",123),r(),S()),o&2){let e=s(3);l(5),_("ngForOf",e.availableUsers)}}function Ge(o,t){if(o&1){let e=v();i(0,"div")(1,"div",80)(2,"label"),c(3,"Start chat by Email"),r(),i(4,"input",121),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.inviteEmail,n)||(d.inviteEmail=n),g(n)}),m("input",function(){p(e);let n=s(2);return g(n.selectedMemberIds=[])}),r()(),u(5,Be,6,1,"ng-container",12),r()}if(o&2){let e=s(2);l(4),h("ngModel",e.inviteEmail),l(),_("ngIf",e.currentUserRole>1)}}function We(o,t){if(o&1&&(i(0,"option",102),c(1),r()),o&2){let e=t.$implicit;_("ngValue",e.value),l(),x(e.label)}}function je(o,t){if(o&1&&(i(0,"option",102),c(1),r()),o&2){let e=t.$implicit;_("ngValue",e.value),l(),x(e.label)}}function Ye(o,t){if(o&1){let e=v();i(0,"div",80)(1,"label"),c(2,"Select Role"),r(),i(3,"select",99),M("ngModelChange",function(n){p(e);let d=s(3);return f(d.groupForm.auto_add_role,n)||(d.groupForm.auto_add_role=n),g(n)}),i(4,"option",130),c(5,"Select Role"),r(),u(6,je,2,2,"option",100),r()()}if(o&2){let e=s(3);l(3),h("ngModel",e.groupForm.auto_add_role),l(),_("ngValue",null),l(2),_("ngForOf",e.roleOptions)}}function qe(o,t){if(o&1){let e=v();i(0,"div")(1,"div",80)(2,"label"),c(3,"Group Name"),r(),i(4,"input",124),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.groupForm.name,n)||(d.groupForm.name=n),g(n)}),r()(),i(5,"div",80)(6,"label"),c(7,"Who can POST?"),r(),i(8,"select",99),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.groupForm.min_role_write,n)||(d.groupForm.min_role_write=n),g(n)}),u(9,We,2,2,"option",100),r()(),U(10,"div",122),i(11,"div",80)(12,"label"),c(13,"Add Members By"),r(),i(14,"div",125)(15,"label",126)(16,"input",127),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.groupCreationMethod,n)||(d.groupCreationMethod=n),g(n)}),r(),c(17," Manual "),r(),i(18,"label",126)(19,"input",128),M("ngModelChange",function(n){p(e);let d=s(2);return f(d.groupCreationMethod,n)||(d.groupCreationMethod=n),g(n)}),r(),c(20," By Role "),r()()(),u(21,Ye,7,3,"div",129),r()}if(o&2){let e=s(2);l(4),h("ngModel",e.groupForm.name),l(4),h("ngModel",e.groupForm.min_role_write),l(),_("ngForOf",e.roleOptions),l(7),h("ngModel",e.groupCreationMethod),l(3),h("ngModel",e.groupCreationMethod),l(2),_("ngIf",e.groupCreationMethod==="ROLE")}}function He(o,t){o&1&&(i(0,"i",115),c(1,"check_circle"),r())}function Ze(o,t){o&1&&(i(0,"i",134),c(1,"radio_button_unchecked"),r())}function $e(o,t){if(o&1&&(i(0,"div"),u(1,He,2,0,"i",132)(2,Ze,2,0,"i",133),r()),o&2){let e=s().$implicit,a=s(3);l(),_("ngIf",a.selectedMemberIds.includes(e.id)),l(),_("ngIf",!a.selectedMemberIds.includes(e.id))}}function Je(o,t){if(o&1){let e=v();i(0,"div",114),m("click",function(){let n=p(e).$implicit,d=s(3);return g(d.isGroupMode?d.toggleMemberSelection(n.id):d.startDM(n.id))}),i(1,"div",104),c(2),r(),i(3,"span",19),c(4),r(),u(5,$e,3,2,"div",12),r()}if(o&2){let e=t.$implicit,a=s(3);C("selected",a.isGroupMode&&a.selectedMemberIds.includes(e.id)),l(2),x(e.full_name==null?null:e.full_name.charAt(0)),l(2),x(e.full_name),l(),_("ngIf",a.isGroupMode)}}function Qe(o,t){if(o&1&&(i(0,"div")(1,"div",131),c(2,"Select People"),r(),i(3,"div",94),u(4,Je,6,5,"div",123),r()()),o&2){let e=s(2);l(4),_("ngForOf",e.availableUsers)}}function Ke(o,t){if(o&1){let e=v();i(0,"button",135),m("click",function(){p(e);let n=s(2);return g(n.startDM())}),c(1," Start Chat "),r()}if(o&2){let e=s(2);_("disabled",!e.inviteEmail&&e.selectedMemberIds.length===0)}}function Xe(o,t){if(o&1){let e=v();i(0,"button",135),m("click",function(){p(e);let n=s(2);return g(n.createGroup())}),c(1," Create Group "),r()}if(o&2){let e=s(2);_("disabled",!e.groupForm.name)}}function et(o,t){if(o&1){let e=v();i(0,"div",85),m("click",function(){p(e);let n=s();return g(n.showNewChatModal=!1)}),i(1,"div",86),m("click",function(n){return p(e),g(n.stopPropagation())}),i(2,"div",77)(3,"h3"),c(4,"New Message"),r(),i(5,"button",6),m("click",function(){p(e);let n=s();return g(n.showNewChatModal=!1)}),i(6,"i",7),c(7,"close"),r()()(),i(8,"div",78),u(9,Le,5,4,"div",117)(10,Ge,6,2,"div",12)(11,qe,22,6,"div",12)(12,Qe,5,1,"div",12),r(),i(13,"div",82)(14,"button",83),m("click",function(){p(e);let n=s();return g(n.showNewChatModal=!1)}),c(15,"Cancel"),r(),u(16,Ke,2,1,"button",118)(17,Xe,2,1,"button",118),r()()()}if(o&2){let e=s();l(9),_("ngIf",e.currentUserRole>1),l(),_("ngIf",!e.isGroupMode),l(),_("ngIf",e.isGroupMode),l(),_("ngIf",e.isGroupMode&&e.groupCreationMethod==="MANUAL"),l(4),_("ngIf",!e.isGroupMode),l(),_("ngIf",e.isGroupMode)}}var ne=class o{constructor(t,e,a,n,d){this.chatService=t;this.authService=e;this.userService=a;this.route=n;this.ngZone=d}scrollContainer;conversations=[];selectedConvo=null;messages=[];showDetailsModal=!1;showNewChatModal=!1;isGroupMode=!1;showInviteMessageModal=!1;inviteMessageText="";pendingInvitePayload=null;blockedUserIds=[];isBlockedByMe=!1;inviteEmail="";currentUserRole=1;groupForm={name:"",min_role_read:O.VIEWER,min_role_write:O.VIEWER,auto_add_role:null};groupCreationMethod="MANUAL";currentUser_id=0;messageText="";selectedFile=null;availableUsers=[];selectedMemberIds=[];messageOffset=0;messageLimit=20;hasMoreMessages=!0;isLoadingMessages=!1;subscriptions=[];roleOptions=[{label:"Everyone (Viewers+)",value:O.VIEWER},{label:"Editors & Admins",value:O.EDITOR},{label:"Admins Only",value:O.ORG_ADMIN}];ngOnInit(){let t=this.authService.currentUser();this.currentUser_id=t?t.id:0,this.currentUserRole=t?t.role:1,this.currentUserRole>5&&this.loadTeam(),this.fetchBlockedUsers(),this.chatService.connect();let e=this.chatService.messageReceived$.subscribe(d=>{this.ngZone.run(()=>{if(this.selectedConvo&&d.conversation_id===this.selectedConvo.id)d.sender.id!==this.currentUser_id&&(this.messages.some(w=>w.id===d.id)||(this.messages.push(d),this.scrollToBottom(),this.chatService.markAsRead(this.selectedConvo.id).subscribe()));else{let b=this.conversations.find(w=>w.id===d.conversation_id);b?(b.unread_count=(b.unread_count||0)+1,b.last_message=d,this.moveToTop(b)):this.loadConversations()}})}),a=this.chatService.messageDeleted$.subscribe(d=>{this.ngZone.run(()=>{if(this.selectedConvo&&d.conversation_id===this.selectedConvo.id){let b=this.messages.findIndex(w=>w.id===d.id);b!==-1&&(this.messages[b]=d)}})}),n=this.chatService.conversationListUpdated$.subscribe(()=>{this.ngZone.run(()=>{this.loadConversations()})});this.subscriptions.push(e,a,n),this.chatService.getConversations().subscribe(d=>{this.conversations=d.map(b=>this.formatConversation(b)),this.route.queryParams.subscribe(b=>{let w=b.id?parseInt(b.id):null;if(w){let I=this.conversations.find(oe=>oe.id===w);I&&this.selectConversation(I)}})})}ngOnDestroy(){this.selectedConvo&&this.chatService.leaveRoom(this.selectedConvo.id),this.chatService.disconnect(),this.subscriptions.forEach(t=>t.unsubscribe())}loadTeam(){this.userService.getTeam().subscribe(t=>{this.availableUsers=t.filter(e=>e.id!==this.currentUser_id)})}loadConversations(){this.chatService.getConversations().subscribe(t=>{this.conversations=t.map(e=>this.formatConversation(e))})}selectConversation(t){if(this.selectedConvo&&this.chatService.leaveRoom(this.selectedConvo.id),this.selectedConvo=t,t.unread_count>0){let e=t.unread_count;t.unread_count=0;let a=this.chatService.totalUnreadCount$.value,n=Math.max(0,a-e);this.chatService.totalUnreadCount$.next(n),this.chatService.markAsRead(t.id).subscribe()}this.messages=[],this.messageOffset=0,this.hasMoreMessages=!0,this.checkIfBlockedByMe(),this.chatService.joinRoom(t.id),this.loadMessages(!0)}loadMessages(t=!1){this.isLoadingMessages||!this.selectedConvo||(this.isLoadingMessages=!0,this.chatService.getMessages(this.selectedConvo.id,this.messageLimit,this.messageOffset).subscribe({next:e=>{if(e.length<this.messageLimit&&(this.hasMoreMessages=!1),this.messageOffset===0)this.messages=e,t&&this.scrollToBottom();else{let a=this.scrollContainer.nativeElement.scrollHeight;this.messages=[...e,...this.messages],setTimeout(()=>{let n=this.scrollContainer.nativeElement.scrollHeight;this.scrollContainer.nativeElement.scrollTop=n-a},0)}this.messageOffset+=e.length,this.isLoadingMessages=!1},error:()=>this.isLoadingMessages=!1}))}fetchBlockedUsers(){this.chatService.getBlockedUsers().subscribe(t=>{this.blockedUserIds=t})}checkIfBlockedByMe(){this.isBlockedByMe=!1,this.selectedConvo?.type==="DM"&&this.selectedConvo.otherUserId&&(this.isBlockedByMe=this.blockedUserIds.includes(this.selectedConvo.otherUserId))}sendMessage(){if(!(!this.messageText.trim()&&!this.selectedFile||!this.selectedConvo)){if(!this.canSendMessage)return alert("You cannot send messages to this conversation.");this.chatService.sendMessage(this.selectedConvo.id,this.messageText,this.selectedFile).subscribe({next:t=>{this.messages.push(t),this.messageText="",this.selectedFile=null,this.scrollToBottom()},error:t=>alert(t.error?.message||"Failed to send")})}}deleteMessage(t){confirm("Delete this message?")&&this.chatService.deleteMessage(t.id).subscribe({next:()=>{t.content="\u{1F6AB} This message was deleted",t.file_path=null}})}get canSendMessage(){return!(!this.selectedConvo||this.selectedConvo.type==="DM"&&(this.selectedConvo.myStatus==="REJECTED"||this.selectedConvo.myStatus==="LEFT")||this.selectedConvo.type==="GROUP"&&(this.authService.currentUser()?.role||1)<(this.selectedConvo.min_role_write||1))}get eligibleMembers(){if(!this.selectedConvo)return[];let t=this.selectedConvo.participants.map(e=>e.user_id);return this.availableUsers.filter(e=>!t.includes(e.id))}openDetailsModal(){this.showDetailsModal=!0}getLastMessagePreview(t){if(!t.last_message)return"No messages yet";let e=t.last_message.content||"Attachment";return(t.last_message.sender_id===this.currentUser_id?"You: ":"")+(e.length>30?e.substring(0,30)+"...":e)}blockUser(t){confirm("Block this user?")&&this.chatService.blockUser(t).subscribe(()=>{this.blockedUserIds.push(t),this.checkIfBlockedByMe(),this.loadConversations(),alert("User Blocked")})}unblockUser(t){confirm("Unblock this user?")&&this.chatService.unblockUser(t).subscribe(()=>{this.blockedUserIds=this.blockedUserIds.filter(e=>e!==t),this.checkIfBlockedByMe(),this.loadConversations(),alert("User Unblocked")})}respondToInvite(t){if(!this.selectedConvo)return;let e=t;this.chatService.respondToInvite(this.selectedConvo.id,e).subscribe(()=>{this.loadConversations(),e==="ACCEPT"?this.selectedConvo.myStatus="ACTIVE":(this.selectedConvo.myStatus="REJECTED",this.isBlockedByMe=!0,this.blockedUserIds.push(this.selectedConvo.otherUserId))})}createGroup(){if(!this.groupForm.name)return alert("Group Name required");let t={name:this.groupForm.name,min_role_read:this.groupForm.min_role_read,min_role_write:this.groupForm.min_role_write};if(this.groupCreationMethod==="MANUAL"){if(this.selectedMemberIds.length===0)return alert("Select at least one member");t.memberIds=this.selectedMemberIds}else{if(!this.groupForm.auto_add_role)return alert("Select a role to auto-add");t.auto_add_role=this.groupForm.auto_add_role}this.chatService.createGroup(t).subscribe({next:()=>{this.showNewChatModal=!1,this.loadConversations()},error:e=>alert(e.error?.message)})}addMemberToGroup(t){if(!this.selectedConvo)return;let e=this.availableUsers.find(a=>a.id===t);this.chatService.addMember(this.selectedConvo.id,t).subscribe({next:()=>{if(alert("Member added"),e){let a={user_id:e.id,is_admin:!1,status:"ACTIVE",user:e};this.selectedConvo.participants=[...this.selectedConvo.participants,a]}this.refreshCurrentConvo()},error:a=>alert(a.error?.message||"Failed to add member")})}removeMemberFromGroup(t){this.selectedConvo&&confirm("Remove this member?")&&this.chatService.removeMember(this.selectedConvo.id,t).subscribe({next:()=>{this.selectedConvo.participants=this.selectedConvo.participants.filter(e=>e.user_id!==t),this.refreshCurrentConvo()},error:e=>alert(e.error?.message||"Failed to remove member")})}deleteGroup(){this.selectedConvo&&confirm("Delete this group completely?")&&this.chatService.deleteGroup(this.selectedConvo.id).subscribe({next:()=>{this.selectedConvo=null,this.showDetailsModal=!1,this.loadConversations()},error:t=>alert(t.error?.message||"Delete failed")})}get isCreateGroupDisabled(){return!this.groupForm.name||this.groupCreationMethod==="MANUAL"&&this.selectedMemberIds.length===0||this.groupCreationMethod==="ROLE"&&!this.groupForm.auto_add_role}updateGroupPermissions(){if(!this.selectedConvo)return;let t={min_role_write:this.selectedConvo.min_role_write};this.chatService.updateGroup(this.selectedConvo.id,t).subscribe({next:()=>alert("Permissions updated"),error:e=>alert(e.error?.message)})}refreshCurrentConvo(){this.chatService.getConversations().subscribe(t=>{if(this.conversations=t.map(e=>this.formatConversation(e)),this.selectedConvo){let e=this.conversations.find(a=>a.id===this.selectedConvo.id);e&&(this.selectedConvo=e)}})}formatConversation(t){if(t.type==="GROUP")t.displayName=t.name;else{let a=t.participants.find(n=>n.user_id!==this.currentUser_id);t.displayName=a?.user?.full_name||"Unknown",t.otherUserId=a?.user_id,t.otherStatus=a?.status}let e=t.participants.find(a=>a.user_id===this.currentUser_id);return t.myStatus=e?.status,t.isAdmin=e?.is_admin,t.unread_count=t.unread_count||0,t}openNewChatModal(){this.showNewChatModal=!0,this.groupCreationMethod="MANUAL",this.selectedMemberIds=[],this.groupForm={name:"",min_role_read:1,min_role_write:1,auto_add_role:null}}startDM(t){let e={};if(t)e.targetUserId=t;else if(this.selectedMemberIds.length>0)e.targetUserId=this.selectedMemberIds[0];else if(this.inviteEmail)e.email=this.inviteEmail;else return alert("Please select a user or enter email.");if(this.currentUserRole<O.ORG_ADMIN){this.pendingInvitePayload=e,this.showNewChatModal=!1,this.showInviteMessageModal=!0,this.inviteMessageText="Hi, I'd like to chat with you regarding...";return}this.executeCreateDM(e)}executeCreateDM(t,e){this.chatService.createDM(t).subscribe({next:a=>{this.showNewChatModal=!1,this.showInviteMessageModal=!1,this.inviteEmail="",this.selectedMemberIds=[],e?this.chatService.sendMessage(a.id,e,null).subscribe(()=>{this.loadConversations(),this.selectConversation(this.formatConversation(a))}):(this.loadConversations(),this.selectConversation(this.formatConversation(a)))},error:a=>alert(a.error?.message||"User not found")})}sendInvite(){if(!this.inviteMessageText.trim())return alert("Please write a message");this.pendingInvitePayload&&this.executeCreateDM(this.pendingInvitePayload,this.inviteMessageText)}get inputState(){return this.selectedConvo?this.isBlockedByMe?"BLOCKED_BY_ME":this.selectedConvo.type==="DM"?this.selectedConvo.myStatus==="PENDING"?"PENDING_INVITE":this.selectedConvo.myStatus==="REJECTED"||this.selectedConvo.myStatus==="LEFT"?"READ_ONLY":"ALLOWED":this.selectedConvo.type==="GROUP"&&this.currentUserRole<this.selectedConvo.min_role_write?"READ_ONLY":"ALLOWED":"READ_ONLY"}toggleMemberSelection(t){let e=this.selectedMemberIds.indexOf(t);e>-1?this.selectedMemberIds.splice(e,1):this.selectedMemberIds.push(t)}onFileSelected(t){this.selectedFile=t.target.files[0]}downloadFile(t){t.file_path&&this.chatService.downloadAttachment(t.id).subscribe({next:e=>{let a=window.URL.createObjectURL(e),n=document.createElement("a");n.href=a,n.download=t.file_path.split("-").pop()||"file",n.click(),window.URL.revokeObjectURL(a)},error:()=>alert("Download failed")})}scrollToBottom(){setTimeout(()=>{this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)},100)}moveToTop(t){this.conversations=this.conversations.filter(e=>e.id!==t.id),this.conversations.unshift(t)}static \u0275fac=function(e){return new(e||o)(P(ee),P(X),P(te),P(j),P(V))};static \u0275cmp=T({type:o,selectors:[["app-chat"]],viewQuery:function(e,a){if(e&1&&D(ie,5),e&2){let n;F(n=N())&&(a.scrollContainer=n.first)}},decls:16,vars:10,consts:[["inviteBadge",""],["scrollContainer",""],["fileInput",""],[1,"chat-layout","fade-in"],[1,"chat-sidebar"],[1,"chat-sidebar__header"],[1,"btn","btn--icon-only",3,"click"],[1,"material-icons"],[1,"conversation-list"],["class","convo-item",3,"active","click",4,"ngFor","ngForOf"],[1,"chat-window"],["class","empty-chat-window",4,"ngIf"],[4,"ngIf"],["class","modal-overlay",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"convo-item",3,"click"],[1,"avatar"],[1,"convo-info"],[1,"convo-info__top"],[1,"name"],[4,"ngIf","ngIfElse"],[1,"convo-info__preview"],[1,"badge","badge--danger"],["class","badge badge--warning",4,"ngIf"],[1,"badge","badge--warning"],[1,"empty-chat-window"],[1,"empty-chat-window__icon"],[1,"empty-chat-window__title"],[1,"empty-chat-window__text"],[1,"window-header"],[1,"btn","btn--icon-only","mobile-back",3,"click"],[1,"avatar-small"],[1,"header-info"],["class","subtitle",4,"ngIf"],["class","invite-banner sticky-banner",4,"ngIf"],[1,"messages-area"],["class","load-more-container",4,"ngIf"],["class","message-row",3,"message-row--me",4,"ngFor","ngForOf"],[1,"input-area"],["class","blocked-msg-bar",4,"ngIf"],["class","blocked-msg-bar","style","background: #fff3e0; color: #e65100;",4,"ngIf"],["class","read-only-msg",4,"ngIf"],[1,"subtitle"],[1,"invite-banner","sticky-banner"],[1,"banner-content"],[1,"actions"],[1,"btn","btn--primary","btn--sm",3,"click"],[1,"btn","btn--text","btn--sm","text-danger",3,"click"],[1,"load-more-container"],[1,"btn","btn--sm","btn--secondary",3,"click","disabled"],["class","material-icons",4,"ngIf"],[1,"message-row"],[1,"bubble"],["class","bubble__sender",4,"ngIf"],[1,"bubble__content"],["class","attachment-card",3,"click",4,"ngIf"],[1,"bubble__footer"],["class","material-icons delete-icon",3,"click",4,"ngIf"],[1,"bubble__sender"],[1,"attachment-card",3,"click"],[1,"material-icons","delete-icon",3,"click"],[1,"blocked-msg-bar"],[2,"text-decoration","underline","cursor","pointer",3,"click"],[1,"blocked-msg-bar",2,"background","#fff3e0","color","#e65100"],["style","position: absolute; bottom: 100%; left: 0; width: 100%; background: #f1f1f1; color: #666; font-size: 0.8rem; padding: 5px 10px; border-top: 1px solid #ddd;",4,"ngIf"],["class","file-preview",4,"ngIf"],["type","file",2,"display","none",3,"change"],["placeholder","Type a message...",1,"msg-input",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn--primary","btn--icon-only",3,"click"],[2,"position","absolute","bottom","100%","left","0","width","100%","background","#f1f1f1","color","#666","font-size","0.8rem","padding","5px 10px","border-top","1px solid #ddd"],[1,"material-icons",2,"font-size","12px","vertical-align","middle"],[1,"file-preview"],[1,"filename"],[1,"btn","btn--icon-only","btn--sm",3,"click"],[1,"read-only-msg"],[1,"modal-overlay"],[1,"modal-card"],[1,"modal-card__header"],[1,"modal-card__body"],[2,"margin-bottom","15px","color","#666"],[1,"form-group"],["rows","4","placeholder","Hi, I'd like to discuss...",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-card__footer"],[1,"btn","btn--text",3,"click"],[1,"btn","btn--primary",3,"click"],[1,"modal-overlay",3,"click"],[1,"modal-card",3,"click"],["class","text-center","style","padding: 20px;",4,"ngIf"],[1,"text-center",2,"padding","20px"],["class","btn btn--outline-danger",3,"click",4,"ngIf"],["class","btn btn--primary",3,"click",4,"ngIf"],[1,"btn","btn--outline-danger",3,"click"],["class","setting-row",4,"ngIf"],[1,"section-title"],[1,"user-select-list"],["class","user-row",4,"ngFor","ngForOf"],["style","margin-top: 20px;",4,"ngIf"],[1,"setting-row"],[1,"flex-row"],[1,"form-select",3,"ngModelChange","ngModel"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"btn","btn--sm","btn--primary",3,"click"],[3,"ngValue"],[1,"user-row"],[1,"avatar-mini"],["class","badge badge--primary",4,"ngIf"],["class","btn btn--icon-only text-danger","style","margin-left: auto;",3,"click",4,"ngIf"],[1,"badge","badge--primary"],[1,"btn","btn--icon-only","text-danger",2,"margin-left","auto",3,"click"],[2,"margin-top","20px"],["class","user-row",3,"click",4,"ngFor","ngForOf"],["style","padding:10px; color: #999; font-size: 0.9rem; text-align: center;",4,"ngIf"],[2,"margin-top","20px","text-align","right"],[1,"btn","btn--text","text-danger",3,"click"],[1,"user-row",3,"click"],[1,"material-icons",2,"color","var(--accent-color)"],[2,"padding","10px","color","#999","font-size","0.9rem","text-align","center"],["class","view-switcher",4,"ngIf"],["class","btn btn--primary",3,"disabled","click",4,"ngIf"],[1,"view-switcher"],[1,"switcher-btn",3,"click"],["placeholder","Enter user email...",3,"ngModelChange","input","ngModel"],[1,"divider"],["class","user-row",3,"selected","click",4,"ngFor","ngForOf"],["placeholder","e.g. Project Alpha",3,"ngModelChange","ngModel"],[2,"display","flex","gap","20px"],[1,"checkbox"],["type","radio","name","method","value","MANUAL",3,"ngModelChange","ngModel"],["type","radio","name","method","value","ROLE",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],["disabled","",3,"ngValue"],[1,"section-title",2,"margin-top","15px"],["class","material-icons","style","color: var(--accent-color)",4,"ngIf"],["class","material-icons","style","color: #ccc",4,"ngIf"],[1,"material-icons",2,"color","#ccc"],[1,"btn","btn--primary",3,"click","disabled"]],template:function(e,a){e&1&&(i(0,"div",3)(1,"aside",4)(2,"div",5)(3,"h2"),c(4,"Messages"),r(),i(5,"button",6),m("click",function(){return a.openNewChatModal()}),i(6,"i",7),c(7,"edit_square"),r()()(),i(8,"div",8),u(9,le,12,9,"div",9),r()(),i(10,"main",10),u(11,se,8,0,"div",11)(12,ye,24,10,"ng-container",12),r()(),u(13,Oe,20,1,"div",13)(14,Re,11,3,"div",14)(15,et,18,6,"div",14)),e&2&&(l(),C("hidden-mobile",!!a.selectedConvo),l(8),_("ngForOf",a.conversations),l(),C("active-mobile",!!a.selectedConvo),l(),_("ngIf",!a.selectedConvo),l(),_("ngIf",a.selectedConvo),l(),_("ngIf",a.showInviteMessageModal),l(),_("ngIf",a.showDetailsModal),l(),_("ngIf",a.showNewChatModal))},dependencies:[W,z,B,K,J,Q,Y,$,Z,q,H,G],styles:[`.card[_ngcontent-%COMP%]{background-color:var(--primary-color);border-radius:12px;border:1px solid var(--border-color);box-shadow:var(--shadow-sm);transition:transform .2s,box-shadow .2s;overflow:hidden}.card--hoverable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 24px #00000014}.card__body[_ngcontent-%COMP%]{padding:20px}.card__header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}.card__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .card__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600;color:var(--text-color)}.table-responsive[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch}.data-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;white-space:nowrap}.data-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:16px;font-size:.8rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-secondary);border-bottom:1px solid var(--border-color);background-color:var(--bg-color)}.data-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid var(--border-color);color:var(--text-color);vertical-align:middle;font-size:.95rem}.data-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000005}.data-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:4px 10px;border-radius:6px;font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.3px}.badge--default[_ngcontent-%COMP%]{background-color:var(--bg-color);color:var(--text-secondary);border:1px solid var(--border-color)}.badge--primary[_ngcontent-%COMP%]{background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color)}.badge--success[_ngcontent-%COMP%]{background-color:#28a7451a;color:#28a745}.badge--warning[_ngcontent-%COMP%]{background-color:#ffc10726;color:#856404}.badge--danger[_ngcontent-%COMP%]{background-color:#dc35451a;color:#dc3545}.badge--info[_ngcontent-%COMP%]{background-color:#17a2b81a;color:#17a2b8}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 18px;border-radius:8px;font-weight:500;cursor:pointer;transition:all .2s;font-size:.95rem;background-color:var(--bg-color);color:var(--text-color);border:none}.btn[_ngcontent-%COMP%]:hover{background-color:#0000000d;border-color:var(--text-secondary)}.btn--primary[_ngcontent-%COMP%]{background-color:var(--accent-color);color:#fff;border:1px solid transparent}.btn--primary[_ngcontent-%COMP%]:hover{filter:brightness(1.1);box-shadow:0 4px 12px rgba(var(--accent-color-rgb),.3);background-color:var(--accent-color);border-color:transparent}.btn--icon-only[_ngcontent-%COMP%]{padding:8px;background:transparent;color:var(--text-secondary);border-radius:50%}.btn--icon-only[_ngcontent-%COMP%]:hover{background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color)}.btn--danger[_ngcontent-%COMP%]{background-color:var(--danger-color);color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{filter:brightness(1.1)}.btn.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)}.btn.text-danger[_ngcontent-%COMP%]:hover{background-color:#dc35451a}.btn--outline-danger[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--danger-color);color:var(--danger-color)}.btn--outline-danger[_ngcontent-%COMP%]:hover{background-color:var(--danger-color);color:#fff}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;border:1px solid var(--border-color);color:var(--text-color)}.btn--outline[_ngcontent-%COMP%]:hover{border-color:var(--text-secondary);background-color:var(--bg-color)}.btn[_ngcontent-%COMP%]:disabled, .btn.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6;box-shadow:none;transform:none}.btn[_ngcontent-%COMP%]:disabled.btn--primary, .btn.disabled.btn--primary[_ngcontent-%COMP%]{background-color:var(--text-secondary);color:#fff}.btn[_ngcontent-%COMP%]:disabled.btn--primary:hover, .btn.disabled.btn--primary[_ngcontent-%COMP%]:hover{filter:none;box-shadow:none}.btn[_ngcontent-%COMP%]:disabled.btn--icon-only, .btn.disabled.btn--icon-only[_ngcontent-%COMP%]{color:var(--border-color)}.btn[_ngcontent-%COMP%]:disabled.btn--icon-only:hover, .btn.disabled.btn--icon-only[_ngcontent-%COMP%]:hover{background-color:transparent;color:var(--border-color)}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:.85rem;gap:6px}.btn--sm[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.btn--text[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-secondary);border:1px solid transparent}.btn--text[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-color);border-color:transparent}.search-box[_ngcontent-%COMP%]{position:relative}.search-box__icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:var(--text-secondary)}.search-box__input[_ngcontent-%COMP%]{padding:10px 15px 10px 40px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--bg-color);color:var(--text-color);width:280px;outline:none;transition:width .3s ease,border-color .2s}.search-box__input[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);width:340px}.search-box__input[_ngcontent-%COMP%]::placeholder{color:var(--text-secondary);opacity:.7}.state-message[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:var(--text-secondary);text-align:center}.state-message__icon[_ngcontent-%COMP%]{font-size:48px;opacity:.5;margin-bottom:15px;color:var(--text-secondary)}.state-message__text[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--text-secondary)}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(0,0,0,.1);border-left-color:var(--accent-color);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:15px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.detail-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}.detail-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed var(--border-color);font-size:.95rem}.detail-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.detail-item__label[_ngcontent-%COMP%]{color:var(--text-secondary);font-weight:500}.detail-item__value[_ngcontent-%COMP%]{color:var(--text-color);font-weight:600;text-align:right}.detail-item__value--highlight[_ngcontent-%COMP%]{color:var(--danger-color)}.text-danger[_ngcontent-%COMP%]{color:var(--danger-color)!important}.toggle-switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:26px}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:var(--border-color);transition:.4s;border-radius:34px}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:4px;bottom:4px;background-color:#fff;transition:.4s;border-radius:50%;box-shadow:0 2px 4px #0003}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:var(--accent-color)}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px var(--accent-color)}.toggle-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(24px)}.checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;color:var(--text-color);font-size:.95rem;-webkit-user-select:none;user-select:none}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:var(--accent-color);appearance:none;-webkit-appearance:none;margin:0;padding:0;box-sizing:border-box;width:16px;height:16px;border:2px solid var(--border-color);border-radius:4px;background-color:var(--bg-color);cursor:pointer;position:relative;transition:all .2s ease;flex-shrink:0}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{border-color:var(--accent-color)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background-color:var(--accent-color);border-color:var(--accent-color)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:after{content:"";position:absolute;display:none;left:5px;top:2px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked:after{display:block}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{background-color:var(--border-color);border-color:var(--border-color);cursor:not-allowed}select[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 36px 10px 12px;font-size:.95rem;font-weight:400;line-height:1.5;color:var(--text-color);background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:8px;color-scheme:light dark;appearance:none;-webkit-appearance:none;-moz-appearance:none;background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%236c757d' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 12px center;background-size:16px 12px;transition:border-color .2s,box-shadow .2s;cursor:pointer}select[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);outline:0;box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.15)}select[_ngcontent-%COMP%]:disabled{background-color:#0000000d;cursor:not-allowed;opacity:.7}select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color);padding:10px}select[_ngcontent-%COMP%]   optgroup[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-secondary);font-weight:700}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:1000;min-width:100%;padding:5px 0;margin-top:4px;font-size:.9rem;color:var(--text-color);text-align:left;list-style:none;background-color:var(--primary-color);background-clip:padding-box;border:1px solid var(--border-color);border-radius:8px;box-shadow:0 4px 20px #00000026;max-height:250px;overflow-y:auto;animation:_ngcontent-%COMP%_slideDownFade .2s ease-out}.dropdown-menu__item[_ngcontent-%COMP%]{display:block;width:100%;padding:10px 16px;clear:both;font-weight:400;color:var(--text-color);text-align:inherit;white-space:nowrap;background-color:transparent;border:0;cursor:pointer;transition:background-color .1s;border-bottom:1px solid var(--border-color)}.dropdown-menu__item[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-menu__item[_ngcontent-%COMP%]:hover, .dropdown-menu__item[_ngcontent-%COMP%]:focus{background-color:rgba(var(--accent-color-rgb),.08);color:var(--accent-color);text-decoration:none}.dropdown-menu__item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%], .dropdown-menu__item[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:var(--text-secondary);margin-top:2px}@media (prefers-color-scheme: dark){.dropdown-menu[_ngcontent-%COMP%]{box-shadow:0 4px 20px #00000080}}@keyframes _ngcontent-%COMP%_slideDownFade{0%{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}input[type=date][_ngcontent-%COMP%], input[type=datetime-local][_ngcontent-%COMP%], input[type=month][_ngcontent-%COMP%], input[type=time][_ngcontent-%COMP%]{display:block;width:100%;padding:10px 12px;font-family:inherit;font-size:.95rem;border-radius:8px;background-color:var(--bg-color);color:var(--text-color);border:1px solid var(--border-color);color-scheme:light dark;cursor:pointer;outline:none;transition:border-color .2s,box-shadow .2s}input[type=date][_ngcontent-%COMP%]:focus, input[type=datetime-local][_ngcontent-%COMP%]:focus, input[type=month][_ngcontent-%COMP%]:focus, input[type=time][_ngcontent-%COMP%]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.15)}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=month][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;opacity:.6;filter:invert(0)}body.dark-theme[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator, body.dark-theme[_ngcontent-%COMP%]   input[type=datetime-local][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1)}input[type=file][_ngcontent-%COMP%]{display:block;width:100%;padding:8px;font-size:.9rem;background-color:var(--bg-color);color:var(--text-secondary);border:1px solid var(--border-color);border-radius:8px;cursor:pointer}input[type=file][_ngcontent-%COMP%]::file-selector-button{margin-right:15px;padding:8px 16px;border:none;border-radius:6px;background-color:rgba(var(--accent-color-rgb),.1);color:var(--accent-color);font-weight:600;cursor:pointer;transition:background .2s}input[type=file][_ngcontent-%COMP%]:hover::file-selector-button{background-color:rgba(var(--accent-color-rgb),.2)}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}.modal-card[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color);width:100%;max-width:500px;border-radius:12px;box-shadow:0 10px 40px #00000040;border:1px solid var(--border-color);display:flex;flex-direction:column;max-height:90vh;animation:_ngcontent-%COMP%_slideUp .3s cubic-bezier(.16,1,.3,1)}.modal-card--lg[_ngcontent-%COMP%]{max-width:800px}.modal-card__header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.modal-card__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;font-weight:600}.modal-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-height:0;overflow:hidden}.modal-card__body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1;-webkit-overflow-scrolling:touch}.modal-card__footer[_ngcontent-%COMP%]{padding:16px 24px;background-color:var(--bg-color);border-top:1px solid var(--border-color);display:flex;justify-content:flex-end;gap:12px;flex-shrink:0;border-bottom-left-radius:12px;border-bottom-right-radius:12px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-size:.9rem;font-weight:600;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border-radius:8px;border:1px solid var(--border-color);background-color:var(--primary-color);color:var(--text-color);font-size:.95rem;outline:none;transition:all .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.1)}.form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:var(--danger-color);font-size:.8rem;margin-top:6px;display:flex;align-items:center;gap:4px}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px) scale(.95);opacity:0}to{transform:translateY(0) scale(1);opacity:1}}.form-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;padding:20px}.form-card[_ngcontent-%COMP%]{background-color:var(--primary-color);border-radius:12px;box-shadow:var(--shadow-sm);border:1px solid var(--border-color);padding:30px}@media (max-width: 768px){.form-card[_ngcontent-%COMP%]{padding:20px}}.form-section[_ngcontent-%COMP%]{margin-bottom:30px;padding-bottom:20px;border-bottom:1px solid var(--border-color)}.form-section[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.form-section__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.form-section__header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-color);font-size:1.1rem;font-weight:600;margin:0;display:flex;align-items:center;gap:8px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin-bottom:20px;align-items:start}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500;color:var(--text-color);font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:var(--danger-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-color);color:var(--text-color);font-size:.95rem;transition:border-color .2s,box-shadow .2s;outline:none}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:var(--accent-color);box-shadow:0 0 0 3px rgba(var(--accent-color-rgb),.15)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled{background-color:#0000000d;cursor:not-allowed}.form-group[_ngcontent-%COMP%]   input.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.ng-invalid.ng-touched[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:var(--danger-color);background-color:#dc354505}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px;font-family:inherit}.form-group[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:var(--danger-color);font-size:.8rem;margin-top:4px;display:flex;align-items:center;gap:4px}.search-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:var(--primary-color);border:1px solid var(--border-color);border-radius:8px;box-shadow:0 4px 15px #0000001a;z-index:50;max-height:250px;overflow-y:auto;margin-top:4px}.search-dropdown__item[_ngcontent-%COMP%]{padding:12px 15px;border-bottom:1px solid var(--border-color);cursor:pointer;transition:background .1s}.search-dropdown__item[_ngcontent-%COMP%]:hover{background-color:var(--bg-color)}.search-dropdown__item[_ngcontent-%COMP%]:last-child{border-bottom:none}.search-dropdown__item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);display:block}.search-dropdown__item[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.chat-layout[_ngcontent-%COMP%]{display:flex;height:calc(95vh - var(--header-height));overflow:hidden;background-color:var(--bg-color)}.chat-sidebar[_ngcontent-%COMP%]{width:320px;background-color:var(--primary-color);border-right:1px solid var(--border-color);display:flex;flex-direction:column;flex-shrink:0;transition:width .3s ease}.chat-sidebar__header[_ngcontent-%COMP%]{height:65px;padding:0 20px;border-bottom:1px solid var(--border-color);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}.chat-sidebar__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:var(--text-color)}.chat-sidebar[_ngcontent-%COMP%]   .conversation-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.convo-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px 20px;cursor:pointer;border-bottom:1px solid var(--border-color);transition:background-color .2s}.convo-item[_ngcontent-%COMP%]:hover{background-color:var(--bg-color)}.convo-item.active[_ngcontent-%COMP%]{background-color:rgba(var(--accent-color-rgb),.08);border-right:3px solid var(--accent-color)}.convo-item[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:44px;height:44px;background-color:var(--bg-color);border:1px solid var(--border-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--text-secondary);font-size:1.1rem;flex-shrink:0}.convo-item[_ngcontent-%COMP%]   .convo-info[_ngcontent-%COMP%]{flex:1;min-width:0}.convo-item[_ngcontent-%COMP%]   .convo-info__top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px}.convo-item[_ngcontent-%COMP%]   .convo-info__top[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--text-color)}.convo-item[_ngcontent-%COMP%]   .convo-info__preview[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.convo-item[_ngcontent-%COMP%]   .convo-info__preview.bold-text[_ngcontent-%COMP%]{font-weight:700;color:var(--text-color)}.chat-window[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;background-color:var(--bg-color);min-width:0;justify-content:center;align-items:center}.empty-chat-window[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);animation:_ngcontent-%COMP%_fadeIn .5s ease-out}.empty-chat-window__icon[_ngcontent-%COMP%]{font-size:64px;background:linear-gradient(135deg,rgba(var(--accent-color-rgb),.05),rgba(var(--accent-color-rgb),.01));color:var(--accent-color);width:120px;height:120px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;opacity:.8}.empty-chat-window__title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:var(--text-color);margin:0 0 5px}.empty-chat-window__text[_ngcontent-%COMP%]{font-size:.95rem;margin:0}.window-header[_ngcontent-%COMP%]{height:65px;background:var(--primary-color);border-bottom:1px solid var(--border-color);display:flex;align-items:center;padding:0 20px;gap:15px;flex-shrink:0}.window-header[_ngcontent-%COMP%]   .mobile-back[_ngcontent-%COMP%]{display:none}.window-header[_ngcontent-%COMP%]   .avatar-small[_ngcontent-%COMP%]{width:38px;height:38px;background:linear-gradient(135deg,var(--accent-color),rgba(var(--accent-color-rgb),.8));color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;box-shadow:0 2px 5px rgba(var(--accent-color-rgb),.3)}.window-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]{flex:1}.window-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--text-color)}.window-header[_ngcontent-%COMP%]   .header-info[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary)}.messages-area[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:12px}.sticky-banner[_ngcontent-%COMP%]{padding:12px 20px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}.sticky-banner.invite-banner[_ngcontent-%COMP%]{background-color:#fff3e0;border-bottom:1px solid #ffe0b2}.sticky-banner.invite-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;color:#e65100}.sticky-banner.invite-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.sticky-banner.invite-banner[_ngcontent-%COMP%]   .banner-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-weight:500}.message-row[_ngcontent-%COMP%]{display:flex}.message-row--me[_ngcontent-%COMP%]{justify-content:flex-end}.message-row--me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]{background-color:var(--accent-color);color:#fff;border-radius:18px 18px 4px;box-shadow:0 2px 5px rgba(var(--accent-color-rgb),.3)}.message-row--me[_ngcontent-%COMP%]   .bubble__footer[_ngcontent-%COMP%]{color:#fffc}.message-row--me[_ngcontent-%COMP%]   .bubble[_ngcontent-%COMP%]   .attachment-card[_ngcontent-%COMP%]{background-color:#fff3}.message-row[_ngcontent-%COMP%]:not(.message-row--me)   .bubble[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color);border:1px solid var(--border-color);border-radius:18px 18px 18px 4px}.message-row[_ngcontent-%COMP%]:not(.message-row--me)   .bubble__sender[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:700;font-size:.75rem;margin-bottom:4px;display:block}.message-row[_ngcontent-%COMP%]:not(.message-row--me)   .bubble__footer[_ngcontent-%COMP%]{color:var(--text-secondary)}.bubble[_ngcontent-%COMP%]{max-width:75%;padding:10px 16px;word-wrap:break-word;font-size:.95rem;line-height:1.5}.bubble__footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:8px;font-size:.7rem;margin-top:4px;margin-bottom:-2px}.bubble__footer[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;opacity:.6}.bubble__footer[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]:hover{opacity:1}.bubble[_ngcontent-%COMP%]   .attachment-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-top:8px;padding:10px;background-color:var(--bg-color);border-radius:8px;font-size:.85rem;font-weight:500;cursor:pointer;transition:opacity .2s}.bubble[_ngcontent-%COMP%]   .attachment-card[_ngcontent-%COMP%]:hover{opacity:.9}.bubble[_ngcontent-%COMP%]   .attachment-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:var(--text-secondary)}.input-area[_ngcontent-%COMP%]{padding:15px;background:var(--primary-color);display:flex;gap:12px;align-items:center;border-top:1px solid var(--border-color);position:relative}.input-area[_ngcontent-%COMP%]   .msg-input[_ngcontent-%COMP%]{flex:1;padding:12px 18px;border-radius:24px;border:1px solid var(--border-color);background-color:var(--bg-color);color:var(--text-color);outline:none;height:48px;font-size:.95rem;transition:border-color .2s}.input-area[_ngcontent-%COMP%]   .msg-input[_ngcontent-%COMP%]:focus{border-color:var(--accent-color)}.blocked-msg-bar[_ngcontent-%COMP%], .read-only-msg[_ngcontent-%COMP%]{flex:1;text-align:center;color:var(--text-secondary);font-style:italic;display:flex;justify-content:center;align-items:center;gap:8px;background-color:var(--bg-color);border-radius:24px;padding:12px}@media (max-width: 768px){.chat-sidebar[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;left:0;bottom:0;transition:transform .3s ease}.chat-sidebar.hidden-mobile[_ngcontent-%COMP%]{transform:translate(-100%)}.chat-window[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;left:0;bottom:0;transition:transform .3s ease;transform:translate(100%)}.chat-window.active-mobile[_ngcontent-%COMP%]{transform:translate(0)}.chat-window[_ngcontent-%COMP%]   .window-header[_ngcontent-%COMP%]   .mobile-back[_ngcontent-%COMP%]{display:flex}}.view-switcher[_ngcontent-%COMP%]{display:flex;background-color:var(--bg-color);padding:4px;border-radius:8px;border:1px solid var(--border-color);margin-bottom:20px}.view-switcher[_ngcontent-%COMP%]   .switcher-btn[_ngcontent-%COMP%]{flex:1;background:transparent;border:none;padding:8px;border-radius:6px;cursor:pointer;font-size:.9rem;font-weight:500;color:var(--text-secondary);transition:all .2s}.view-switcher[_ngcontent-%COMP%]   .switcher-btn.active[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--accent-color);box-shadow:0 2px 5px #0000001a;font-weight:600}.user-select-list[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-color)}.user-select-list[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]{padding:10px 15px;border-bottom:1px solid var(--border-color);display:flex;align-items:center;gap:12px;cursor:pointer;background-color:var(--primary-color);transition:background .2s}.user-select-list[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.user-select-list[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]:hover{background:var(--bg-color)}.user-select-list[_ngcontent-%COMP%]   .user-row.selected[_ngcontent-%COMP%]{background-color:rgba(var(--accent-color-rgb),.05)}.user-select-list[_ngcontent-%COMP%]   .user-row.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--accent-color);font-weight:600}.user-select-list[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]   .avatar-mini[_ngcontent-%COMP%]{width:32px;height:32px;background:var(--bg-color);border:1px solid var(--border-color);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.8rem;color:var(--text-secondary)}.user-select-list[_ngcontent-%COMP%]   .user-row[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1;color:var(--text-color)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}`]})};export{ne as ChatComponent};
